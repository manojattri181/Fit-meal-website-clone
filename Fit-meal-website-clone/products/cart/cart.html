<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <link rel="stylesheet" href="/Fit-meal-website-clone/navBar/login/navbar/style.css">
    <link rel="stylesheet icon" href="/Fit-meal-website-clone/products/products.imges/favicon_logo.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/Fit-meal-website-clone/footer/footer.css">
</head>
<body>
  
  <header>
    <div id="cont">
        <p> <i id="green" class="fa fa-map-marker" aria-hidden="true"></i> Food delivery only in Hyderabad</p>
        <p id="bold"> <i  id="green" class="fa fa-phone" aria-hidden="true"></i>9100347480</p>
        <p> <i id="green" class="fa fa-envelope" aria-hidden="true"></i>fitmealsindia@gmail.com</p>
        
        <div id="conta">
        <i id="search" class="fa fa-search" aria-hidden="true"></i>
        <a href="/Fit-meal-website-clone/login/login.html"><i id="user" class="fa fa-user" aria-hidden="true"></i></a>
        <a href="/Fit-meal-website-clone/products/cart/cart.html"><i  id="bag" class="fa fa-shopping-bag" aria-hidden="true"></i> </a>
       
         <i id="circle"  class="fa fa-circle-thin" aria-hidden="true"></i>
   </div>
    </div>

     <div id="sumit">
      <img id="image" src="https://www.fitmeals.co.in/wp-content/uploads/2019/06/logo-black.png" alt="logo">  
      <div id="home">
          <div id="conten">
            <li><a id="home1" href="/Fit-meal-website-clone/Home Page/index.html">Home</a></li>
            <li><a href="#">Meal Plan</a>
                <ul>
                    <li><a href="/Fit-meal-website-clone/menu/weightloss.html">Weight Loss Meal Plan</a></li>
                    <li><a href="/Fit-meal-website-clone/menu/maintenancemealplan.html">Maintenance Meal Plan</a></li>
                    <li><a href="/Fit-meal-website-clone/menu/atheleticplan.html">Atheletics Meal Plan</a></li>
                    <li><a href="/Fit-meal-website-clone/menu/ketomealplan.html">Keto Meal Plan</a></li>
                    <li><a href="/Fit-meal-website-clone/menu/maintenancemealplan.html">Transformations</a></li>
                </ul> 
            </li>
            <li><a href="#">Health Coaching</a></li>
            <li><a href="/Fit-meal-website-clone/products/products_content/product.html">Product</a>
                <ul>
                    <li><a href="/Fit-meal-website-clone/products/products_content/product.html">Vegan Sweets</a></li>
                    <li><a href="/Fit-meal-website-clone/products/products_content/product.html">Low-Cal Sauces</a></li>
                    <li><a href="/Fit-meal-website-clone/products/products_content/product.html">Nut Butter</a></li>
                    <li><a href="/Fit-meal-website-clone/products/products_content/product.html">Fresh bakes</a></li>
                </ul>
            </li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">About Us ></a>
            <ul>
                <li><a href="/Fit-meal-website-clone/about/about.html">Our Story</a></li>
                <li><a href="#">FAQ</a></li>
                <li><a href="/Fit-meal-website-clone/about/test.html">Testimonial</a></li>
            </ul>
        </li>
        <button id="button">Call:9100347480</button>
    </div>
         
           
           
</div> 

</header>
    <div id="logo">
        <h1>Cart</h1>
    </div>
        <main>
            <table>
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th>Product</th>
                  <th>Price</th>
                  <th>Quantity</th>
                  <th>Subtotal</th>
                </tr>
              </thead>
              <tbody id="body">
                <!-- Append your output to tbody -->
              </tbody>
            </table>
      
            <table id="address">
              <tr>
                <td></td>
                <td><button id="updatechange">UPDATE CART</button></td>
              </tr>
            <tr>
                    <td>Subtotal</td>
                    <td id="subtotal"> <!--appendsubtotal-->  0</td>
                </tr>
                <tr>
                    <td>Shipping</td>
                    <td>
                        <p>Flat rate : <span> ₹50.00</span> </p> <p>Shipping to <span> Telangana</span> </p>
                        <p><a href="">CHANGE ADDRESS  <i class="fa fa-bus"></i></a></p>
                    </td>
                </tr>
                <tr>
                    <td>Total</td>
                    <td  id="shiptotal"><!-- Total + shipping charges--> 0 </td>
                </tr>
                <tr>
                    <td></td>
                    <td> <button id="payment">Proceed to checkout</button> </td></tr>
                   
            
            
            <div id="coupon">
                <input type="text" id="discount" placeholder="Coupon code">
                <button id="coupon_btn">Apply coupon</button>
            </div>
            </table>
          </main>
        <div id="foot">
          <footer>
            <div id="footer">
                <div id="fcontent">
                    <div>
                       <img src="https://www.fitmeals.co.in/wp-content/uploads/2019/06/logo-white.png" alt="">
                        <p>The Fitmeals culinary team consists of very passionate and skilled chefs. Our team is well versed in nutrition and all our menus and plans are designed by qualified nutrition experts.</p>
                        <div>
                            <i class="fa fa-facebook-f" style="font-size:36px"></i>
                            <i class="fa fa-instagram" style="font-size:36px"></i>
                            <i class="fa fa-twitter" style="font-size:36px"></i>
                       </div>
                    </div>
        
        
                    <div id="explore">
                        <h2>Explore</h2>
                        <li><a href="/Fit-meal-website-clone/Home Page/index.html"><i class="fa fa-caret-right"></i>Home</a> </li>
                        <li><a href="/Fit-meal-website-clone/menu/ketomealplan.html"><i class="fa fa-caret-right"></i>Meal Plans</a></li>
                        
                    </div>
                    <div id="link">
                        <h2>Links</h2>
                        <li><a href="/Fit-meal-website-clone/about/about.html"><i class="fa fa-caret-right"></i>About Us</a></li>
                        <li><a href=""><i class="fa fa-caret-right"></i>Blog</a></li>
                        <li><a href=""><i class="fa fa-caret-right"></i>FAQ</a></li>
                        <li><a href="/Fit-meal-website-clone/about/test.html"><i class="fa fa-caret-right"></i>Testimonials</a></li>
                    </div>
                    <div id="contact">
                        <h2>Contact</h2>
                        <h3><i class="fa fa-phone"></i>Call Us</h3>
                        <li>9100347480</li>
                        <li>9963697412</li>
                        <h3><i class="fa fa-envelope"></i>Email Us:
                        
                        </h3>
                        <li>fitmealsindia@gmail.com</li>
                        <h3> <i class="fa fa-map-marker"></i>Our Location</h3>
                        <li>Bnjara Hills, Road no 5, Hyderabad</li>
                    </div>
                </div>
                <div id="bott">
                    Copyright © 2021. <a href="/Fit-meal-website-clone/Home Page/index.html">Fitmeals.</a>All Rights Reserved.
                </div>
        
        
        
            </div>
        </footer>
        
        </div>    
        
</body>
</html>
<script>
  let cart_items = JSON.parse(localStorage.getItem("cart_data"));
// total
 let grandtotal = 0; 
 let subtotal=  document.querySelector("#subtotal");
 let shiptotal=  document.querySelector("#shiptotal");

 for(let i=0;i<cart_items.length;i++){
   grandtotal+=  +cart_items[i].subtotal;
  }
localStorage.setItem("product_subtotal",JSON.stringify(grandtotal));
  // discount functionality
  document.querySelector("#coupon_btn").addEventListener("click",function(){
   let value = "masai40" ;

   let input_discount = document.querySelector("#discount").value;
   if(input_discount === value){
   var  discount_total = grandtotal - Math.round(grandtotal*0.4); 

   localStorage.setItem("cart_value",JSON.stringify(discount_total));

   let cart_value = JSON.parse(localStorage.getItem("cart_value"));
   subtotal.innerText = cart_value;
   shiptotal.innerText = "₹ "+(cart_value+50);
   
  localStorage.setItem("grand_total" ,JSON.stringify(cart_value));
   
  input_discount.innerText = "";
  }else{
    alert("Invalid coupon");
  }
  });
  
  subtotal.innerText = "₹ "+grandtotal;
  shiptotal.innerText = "₹ "+(grandtotal+50);
  // this will help in paymnet page;
  localStorage.setItem("shiptotal" , JSON.stringify(grandtotal+50))
  
displaydata(cart_items);
function displaydata(cart_items){
  
   document.querySelector("tbody").innerHTML ="";
   
   cart_items.forEach(function(ele,i){
 let row = document.createElement("tr")

 let image = document.createElement("img");
 image.setAttribute("src",ele.img);
 image.setAttribute("id" ,"cart_image");

 let  name = document.createElement("td");
 name.innerText = ele.name;
 name.style.fontWeight = "bolder";
 name.style.fontSize = "24px";
 
 let  Price = document.createElement("td");
 Price.innerText = ele.price;
 Price.style.color = "green";
 Price.style.fontWeight = "bold";

 let  Quantity = document.createElement("input");
 Quantity.setAttribute("type" , "number");
 Quantity.setAttribute("id" , "quantity_manager");
 Quantity.value = ele.quantity;

 let  Subtotal = document.createElement("td");
 Subtotal.innerText = ele.subtotal;
 Subtotal.style.fontWeight = "bolder";

 let  remove = document.createElement("td");
 remove.innerText = "X";
 remove.style.color = "red";
 remove.style.fontWeight = "bolder";
 remove.style.cursor = "pointer";
 remove.addEventListener("click",function(){
  delete_items(ele,i);
 });

 row.append(remove,image,name,Price,Quantity,Subtotal);

  body.append(row);
})
}

function delete_items(ele,i){
 cart_items.splice(i,1);
 localStorage.setItem("cart_data" ,JSON.stringify(cart_items));
  window.location.reload();
}

</script>